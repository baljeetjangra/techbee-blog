{% extends "base.html" %}
{% load crispy_forms_tags %}

{% load blog_tags %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
<div>
    <main class="container mx-auto">
        <div class="flex mb-4">
            <div class="sm:w-1/2 lg:w-3/4 ">
                <div class="bg-gray-200 my-24    p-4 rounded-lg">
                    <h1 class="text-2xl font-medium py-3">{{ post.title }}</h1>
                    <p class="date py-2">
                        <svg style="display: inline;"  class="w-4 h-4 ml-2" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
<g>
	<g>
		<g>
			<circle cx="386" cy="210" r="20"/>
			<path d="M432,40h-26V20c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v20h-91V20c0-11.046-8.954-20-20-20
				c-11.046,0-20,8.954-20,20v20h-90V20c0-11.046-8.954-20-20-20s-20,8.954-20,20v20H80C35.888,40,0,75.888,0,120v312
				c0,44.112,35.888,80,80,80h153c11.046,0,20-8.954,20-20c0-11.046-8.954-20-20-20H80c-22.056,0-40-17.944-40-40V120
				c0-22.056,17.944-40,40-40h25v20c0,11.046,8.954,20,20,20s20-8.954,20-20V80h90v20c0,11.046,8.954,20,20,20s20-8.954,20-20V80h91
				v20c0,11.046,8.954,20,20,20c11.046,0,20-8.954,20-20V80h26c22.056,0,40,17.944,40,40v114c0,11.046,8.954,20,20,20
				c11.046,0,20-8.954,20-20V120C512,75.888,476.112,40,432,40z"/>
			<path d="M391,270c-66.72,0-121,54.28-121,121s54.28,121,121,121s121-54.28,121-121S457.72,270,391,270z M391,472
				c-44.663,0-81-36.336-81-81s36.337-81,81-81c44.663,0,81,36.336,81,81S435.663,472,391,472z"/>
			<path d="M420,371h-9v-21c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v41c0,11.046,8.954,20,20,20h29
				c11.046,0,20-8.954,20-20C440,379.954,431.046,371,420,371z"/><circle cx="299" cy="210" r="20"/><circle cx="212" cy="297" r="20"/><circle cx="125" cy="210" r="20"/><circle cx="125" cy="297" r="20"/><circle cx="125" cy="384" r="20"/><circle cx="212" cy="384" r="20"/><circle cx="212" cy="210" r="20"/></g></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>
<g></g><g></g></svg> Published {{ post.publish }} by {{ post.author }}</p>
                    <hr class="py-2">
                    {{ post.body|markdown }}
                    <hr class="py-2">
                    
                    <p class="text-center">
                    <a style="color: #7D91EC;" href="{% url "blog:post_share" post.id %}">
                        <svg style="display: inline;"  class="w-4 h-4 ml-2" id="Capa_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g><path d="m437.02 74.98c-48.353-48.351-112.64-74.98-181.02-74.98s-132.667 26.629-181.02 74.98c-48.351 48.353-74.98 112.64-74.98 181.02s26.629 132.667 74.98 181.02c48.353 48.351 112.64 74.98 181.02 74.98s132.667-26.629 181.02-74.98c48.351-48.353 74.98-112.64 74.98-181.02s-26.629-132.667-74.98-181.02zm-181.02 407.02c-124.617 0-226-101.383-226-226s101.383-226 226-226 226 101.383 226 226-101.383 226-226 226z"/><path d="m336 211c30.327 0 55-24.673 55-55s-24.673-55-55-55-55 24.673-55 55c0 4.329.519 8.537 1.469 12.581l-87.523 48.623c-9.965-10.003-23.744-16.204-38.946-16.204-30.327 0-55 24.673-55 55s24.673 55 55 55c15.202 0 28.981-6.201 38.946-16.204l87.523 48.623c-.95 4.044-1.469 8.252-1.469 12.581 0 30.327 24.673 55 55 55s55-24.673 55-55-24.673-55-55-55c-15.202 0-28.981 6.201-38.946 16.204l-87.523-48.623c.95-4.043 1.469-8.251 1.469-12.581s-.519-8.537-1.469-12.581l87.523-48.623c9.965 10.003 23.744 16.204 38.946 16.204zm0 120c13.785 0 25 11.215 25 25s-11.215 25-25 25-25-11.215-25-25 11.215-25 25-25zm-180-50c-13.785 0-25-11.215-25-25s11.215-25 25-25 25 11.215 25 25-11.215 25-25 25zm180-150c13.785 0 25 11.215 25 25s-11.215 25-25 25-25-11.215-25-25 11.215-25 25-25z"/></g></svg> Share this post
                    </a>
                    </p>
                </div>
                <div class="bg-gray-200 my-24    p-4 rounded-lg">
                {% with comments.count as total_comments %}
                <h2>
                    {{ total_comments }} Comment{{ total_comments|pluralize }}
                </h2>
                <hr class="py-2">
                {% endwith %}
                
                {% for comment in comments %}
                <div class="comment">
                    <p class="info text-lg">
                        Comment {{ forloop.counter }} by {{ comment.name }}
                        {{ comment.created }}
                    </p>

                     <div class="font-medium bg-gray-500 rounded-lg p-2 mx-5"> {{ comment.body|linebreaks }} </div>
                
                </div>

                {% empty %}
                <p>There are no comments yet.</p>
                {% endfor %}
            </div>
            {% if new_comment %}
            <h2 class="font-medium bg-gray-500 rounded-lg p-2 mx-5">Your comment has been added.</h2>
            {% else %}
                        <div class="bg-gray-200 my-24    p-4 rounded-lg">
                <h2 class="text-lg">Add a new comment</h2>
                <form class="uniForm" method="post">
                    {{ comment_form|crispy }}
                    {% csrf_token %}
                    <p><input class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 my-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit" value="Add comment"></p>
                </form>
                {% endif %}
            </div>
            </div>
            <div class="sm:w-1/2 lg:w-1/4 ">
                <aside class="text-gray-700 body-font">
                    <div class="container px-5 py-24 mx-auto">
                        <div style="background-color: #EDF2F7;" class=" rounded-lg my-3  font-medium ">
                            <h2 class="text-lg  text-center py-2">Similar posts</h2>
                            <div style="color: #7D91EC;" class="p-2">

                                {% for post in similar_posts %}
                                <p class="">
                                    {{ forloop.counter }}. <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
                                </p>
                                {% empty %}
                                There are no similar posts yet.
                                {% endfor %}
                            </div>
                        </div>
                        {% include 'sidebar.html' %}
                </div>
            </aside>
        </div>
        </div>
    </main>
{% endblock %}